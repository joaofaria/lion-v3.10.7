{"version":3,"sources":["webpack:///./src/components/GuacamoleConnect.vue?9729","webpack:///./src/components/GuacamoleConnect.vue","webpack:///./src/api/session.js","webpack:///./src/components/GuacClipboard.vue","webpack:///src/components/GuacClipboard.vue","webpack:///./src/components/GuacClipboard.vue?192b","webpack:///./src/components/GuacClipboard.vue?a4ed","webpack:///./src/components/GuacFileSystem.vue","webpack:///./src/components/GuacFile.vue","webpack:///src/components/GuacFile.vue","webpack:///./src/components/GuacFile.vue?f79c","webpack:///./src/components/GuacFile.vue?12ec","webpack:///src/components/GuacFileSystem.vue","webpack:///./src/components/GuacFileSystem.vue?7517","webpack:///./src/components/GuacFileSystem.vue?e606","webpack:///./src/components/RightPanel.vue","webpack:///src/components/RightPanel.vue","webpack:///./src/components/RightPanel.vue?0999","webpack:///./src/components/RightPanel.vue?fa24","webpack:///./src/components/Settings.vue","webpack:///src/components/Settings.vue","webpack:///./src/components/Settings.vue?1cb0","webpack:///./src/components/Settings.vue?c2c0","webpack:///src/components/GuacamoleConnect.vue","webpack:///./src/components/GuacamoleConnect.vue?4627","webpack:///./src/components/GuacamoleConnect.vue?ff56","webpack:///./src/components/GuacClipboard.vue?68a5","webpack:///./src/components/GuacFileSystem.vue?27dc","webpack:///./src/components/RightPanel.vue?1490","webpack:///./src/components/GuacFile.vue?f2ef","webpack:///./src/components/Settings.vue?4317"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","attrs","loadingText","style","containerStyle","ref","settings","$t","staticClass","_v","_s","on","decreaseScale","scaleValue","increaseScale","model","autoFit","callback","$$v","clipboardInited","clipboardDrawer","client","tunnel","$event","onCloseDrawer","_e","fileSystemInited","fileDrawer","staticRenderFns","createSession","url","data","post","deleteSession","sid","del","visible","updateVisible","staticStyle","clipboardText","props","type","required","default","watch","methods","sendClipboardToRemote","navigator","sendDataToRemoteClipboard","writer","receiveClientClipboard","reader","setLocalClipboard","component","show","updateShow","fileList","uploadFile","refresh","slot","clearFileList","changeParentFolder","currentFolder","streamName","_l","sortedFiles","item","index","key","downloadFile","changeFolder","fileItem","clickFile","filename","computed","components","GuacFile","files","mimetype","parent","currentFilesystem","object","unsortedFiles","guacObject","mounted","destroyed","fileSystemReceived","onDownloadFile","clientFileReceived","iframe","document","stream","window","fileDrop","e","msg","handleFiles","vm","reject","xhr","progressCallback","resolve","fd","uploadToStream","onChangeFolder","percent","fileObj","setTimeout","fakeProcess","finished","updateDirectory","file","expectedPrefix","class","_t","clickNotClose","addClass","removeClass","beforeDestroy","element","init","dragDiv","clientOffset","addEventClick","closeSidebar","insertToBody","body","toggle","title","i","icon","disabled","stopPropagation","click","itemClick","content","Object","keys","length","pixelDensity","sideWidth","GuacClipboard","GuacFileSystem","RightPanel","Settings","apiPrefix","wsPrefix","dialogFormVisible","requireParams","isMenuCollapse","hasFileSystem","session","tunnelState","clientState","localCursor","clientProperties","displayWidth","displayHeight","connected","clipboardData","sink","keyboard","combinationKeys","scale","timeout","origin","lunaId","display","height","width","menuDisable","isRemoteApp","toggleFileSystem","initFileSystem","dropbox","initClipboard","beforeunloadFn","startConnect","onClientConnected","handleEventFromLuna","console","sendEventToLuna","id","removeSession","menuIndex","toggleClipboard","getAutoSize","getGuaSize","getKeyboardLayout","getConnectString","Promise","getSupportedMimetypes","getSupportedGuacAudios","getSupportedGuacVideos","supportImages","connectString","supportAudios","supportVideos","onTunnelStateChanged","clientStateChanged","recorder","requestAudioStream","clientOnErr","closeDisplay","confirmButtonText","onCursor","handleMouseState","sendScaledMouseState","mouseState","handleEmulatedMouseState","handleEmulatedMouseDown","onMouseDown","onMouseOut","getPropScale","updateDisplayScale","debounceWindowResize","clearTimeout","onWindowResize","displayResize","onWindowFocus","onsync","handleKeys","setTunnelCallback","oninstruction","onJmsEvent","onFileSystem","setClientCallback","setDisplayCallback","displayEl","mouse","touchScreen","connectGuacamole","displayRef"],"mappings":"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,OACAoK,+BACAC,+BAGA5J,aACA,mCAEA6J,uBACA,uEAEAC,uBACA,+CAEA3C,iBACA,wBACA,6BAEA,6BAEA1H,WACA,SACA,CACA0H,2BACAE,6BACAC,qDACAE,kCAEA,CACAL,uBACAE,sBACAC,mDACAE,oCAYA,OATA,kBACA/H,QACA0H,2BACAE,wBACAC,gDACAI,6BACAD,kCAGA,IAGA1F,OACA5B,oBACA,GACA,4BAIAoE,mBACA,yBACA,wBACA,sBACA,aACAvD,+BACA+D,kEACAA,4DACA,oBACA,sBACA,UACA,qBACAK,uBACA,qBACAA,4DACAA,eAEAL,gEAEA/C,SACA/B,gBACA,gBACA,eACA,gCAEAF,gBACA,gBACA,eACA,gBACA,eAEA,gCAEAgK,oBACA,mBAGA,mCAEAC,iBACA,yBACAlE,gBACA,2CACAmE,4CACAhF,oBACAA,sBACA,GACAgF,2CACAhF,oBACAA,sBACA,GACAgF,8DACA,MAEAC,gBACA,0CACA,uCACA,gCACA,yCACA,yBAGAC,kBACA,sBAEAC,eACA,gDACA,0CAGAC,oBACA,sBACAtF,4DACAA,kCACAA,mBACA,sBACA,wBAKAuF,uBACA,eACA,eACA,WACA,qBACA,OAEA,iBACA,qBACA,kCACA,MACA,WACA,0BACA,MAEAC,sCAGAC,qBACA,mBACAzF,2BAAAhG,OAAA0L,eAAAvJ,QAAA,cAIAwJ,gBACAtJ,4CACA,sBAGAuJ,eACA,YAEAC,kBACA,mBAGA,6CAGAC,cACA,0BACA,qBAEA,OADA,kCACA,OAGAC,aACA,0CACA,qBACA,qDAEA,OADA,wCACA,mBAEA,sBAGA,OAFAlB,cACAD,cACA,kCACA,yCACA,oBAEA,OAEAoB,oBACA,0CACA,oBACA,uBAEA,OADA,sCACA,GACA,IAKAC,oBAEA,6BACA,2BACA,OACA,2BACAC,aACAC,iBACAC,iBACAC,mBACA,SAEA,aACA,OACA,OACA,MACA,oCACA,6BACA,8BACA,2BACA,wCACA,sCACAC,uBACAC,2CAEAC,uBACAD,2CAEAE,uBACAF,2CAEA9F,UAKAiG,wBACA,UAEA,iCACA,8BACA,mEACA,MAGA,2BACA,wBACA,6DACA,sBACA,qBACA,MAGA,+BACA,4BACA,iEACA,MAGA,6BACA,0BACA,+DACA,MACA,QACA,2BACA,oDACA,QAIAC,sBACA,UAEA,OACA,wBACA,qCACA,MAGA,OACA,8BACA,2CACA,MAGA,OACA,uCACA,oDACA,MAGA,OACA,6BACA,2CACA,gBAMA,wCACA,gBAEA,+BACA,MACA,IACAC,qCACA,SACApB,gDACAoB,OAKA,EAGAA,yBAHA7G,aAKA8G,eACA,yBACA,MAGA,OACA,OACA,iCACA,8CAEA,yCACAlC,eACA,mCACA,QAIAmC,eACA,gBACA,iCACA,sBAGAC,gBACA,iCACA,eACA,gBACA,yBAEA,OADA5G,kEACA,GACA,UAGAA,EADA,SACAA,gBAEAA,gBAEA,MACA,UACAA,uCACA,MACA,UACAA,uCACA,MAEA,mCACA6G,gCACA3L,aACA,2CACA,cAEAsJ,oBAKAsC,gBACA,qBAGAC,oBAGA,4BACA,sCAEA,2CACA,+BAGAC,wBACA,4BACAC,4BACAA,4BACAA,OACAA,SACAA,QACAA,KACAA,QACA,+BAGAC,4BAGA,4BAGA,4BACA,8CAEA,+BAGAC,2BACA,iCACA,uBACA,kBACA,8CAGAC,eACAzH,sBACA,yBACA,uBACA,mBAGA0H,cACA,cACA,6BAGA5L,gBACA,2CACA,mBAGA6L,eACA,iCACA,MACA,SAEA,qBACA,gBACA,gBACA,SAEA,8BAEA,gBACA5C,2BACAD,8BAIA8C,qBACA,iCACA,MACA,OAGA,4BACA,iBAGA,aACA,wBAGAC,uBACA,cACAC,2BAEA,wDAGAC,iBAIA,GAFA,sCACA,uCACA,aAEA,YADA,oDAGA,6BACA,uBACA,iCACA,kBACA,iBAEA,GADA,0BACA,aACA,OAEA,4BAIAC,mBAEA,wCACA,4BACA,uBAGAC,gBACA,oCACA,sBACA,8CAIAC,qBAIAC,cACA,gBAGA,2BACA,iCAEA,2BACA,mCAIAC,qBACA,aACAxM,cACA2E,yCACAA,kCAEA3E,aACA2E,yCACAA,iBAEA3E,uCACA,wBACAA,wBACA,GACAyM,OAEA,kBACA9H,wBACAA,4CAKA+H,gBACA,sBACA,UACA,qBACA,+CACA,sBACA,MAEA,sBACA,gDACA,sBACA,MAEA,QACA,MAEA,qCAGAC,kBACA,sBACA,sEAGAC,qBACA,aAEA7M,wCACAA,2BAEAA,iCACAA,kBACA,6CAGAA,qBACA,8CAEAA,sBAEA8M,sBACA5D,8BACAA,yBAEA,uBACA,kCACA6D,cACAtI,oBACA,GAEA,yBAEAuI,+BACAA,gDAEAA,6BACA,aAEA,2CACA,+BACAC,2CACAA,wDAEA,0BACAtE,UACA,YAGA,yCACAC,gBACA,yCACA,+BAEAA,cACA,yCACA,+BAEA,iBAEAsE,sBACA,2CACA,6BAEAjN,qBACA,0BACA,cACA,cACA,4BAEA,oCACA,oCACA,sCAEAkN,yCACAA,sCACA,gCAEAnN,aACAuE,2BACAvE,mBClzB0V,ICQtV,G,UAAY,eACd,EACA/B,EACAsC,GACA,EACA,KACA,WACA,OAIa,e,sHCnBf,W,2DCAA,W,kCCAA,W,kCCAA,W,iFCAA","file":"assets/js/chunk-f420b95c.277da7ee.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacamoleConnect.vue?vue&type=style&index=0&id=8c71e308&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',[_c('el-main',[_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"element-loading-text\":_vm.loadingText,\"element-loading-background\":\"#1f1b1b\"}},[_c('div',{style:(_vm.containerStyle)},[_c('div',{attrs:{\"id\":\"displayOuter\"}},[_c('div',{attrs:{\"id\":\"displayMiddle\"}},[_c('div',{attrs:{\"id\":\"display\"}})])])])])],1),_c('RightPanel',{ref:\"panel\"},[_c('Settings',{attrs:{\"settings\":_vm.settings,\"title\":_vm.$t('Settings')}},[_c('el-button',{staticClass:\"item-button el-icon-c-scale-to-original\",attrs:{\"type\":\"text\"}},[_vm._v(\" \"+_vm._s(_vm.$t('Display'))+\" \")]),_c('div',{staticClass:\"content\"},[_c('i',{staticClass:\"el-icon-remove-outline\",on:{\"click\":_vm.decreaseScale}}),_c('span',[_vm._v(_vm._s(_vm.scaleValue)+\"%\")]),_c('i',{staticClass:\"el-icon-circle-plus-outline\",on:{\"click\":_vm.increaseScale}}),_c('el-form',{attrs:{\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('AutoFit')}},[_c('el-switch',{model:{value:(_vm.autoFit),callback:function ($$v) {_vm.autoFit=$$v},expression:\"autoFit\"}})],1)],1)],1)],1)],1),(_vm.clipboardInited)?_c('GuacClipboard',{ref:\"clipboard\",attrs:{\"visible\":_vm.clipboardDrawer,\"client\":_vm.client,\"tunnel\":_vm.tunnel},on:{\"update:visible\":function($event){_vm.clipboardDrawer=$event},\"closeDrawer\":_vm.onCloseDrawer}}):_vm._e(),(_vm.fileSystemInited)?_c('GuacFileSystem',{ref:\"fileSystem\",attrs:{\"client\":_vm.client,\"tunnel\":_vm.tunnel,\"show\":_vm.fileDrawer},on:{\"update:show\":function($event){_vm.fileDrawer=$event},\"closeDrawer\":_vm.onCloseDrawer}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { del, post } from '../plugins/request'\n\nexport function createSession(url, data) {\n  return post(url + '/session', data, {})\n}\n\nexport function deleteSession(url, sid) {\n  return del(url + `/sessions/${sid}/`, {})\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-drawer',{staticClass:\"clipboardDrawer\",attrs:{\"direction\":\"ltr\",\"title\":_vm.$t('Clipboard'),\"visible\":_vm.visible},on:{\"update:visible\":_vm.updateVisible,\"close\":_vm.onCloseDrawer}},[_c('div',{staticClass:\"grid-content bg-purple\",staticStyle:{\"width\":\"100%\"}},[_c('el-input',{staticClass:\"clipboard\",attrs:{\"type\":\"textarea\",\"rows\":10},model:{value:(_vm.clipboardText),callback:function ($$v) {_vm.clipboardText=$$v},expression:\"clipboardText\"}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-drawer direction=\"ltr\" class=\"clipboardDrawer\" :title=\"$t('Clipboard')\" :visible=\"visible\" @update:visible=\"updateVisible\" @close=\"onCloseDrawer\">\n    <div class=\"grid-content bg-purple\" style=\"width: 100%\">\n      <el-input v-model=\"clipboardText\" type=\"textarea\" class=\"clipboard\" :rows=\"10\" />\n    </div>\n  </el-drawer>\n</template>\n\n<script>\nimport Guacamole from 'guacamole-common-js'\n\nexport default {\n  name: 'GuacClipboard',\n  props: {\n    client: {\n      type: Object,\n      required: true\n    },\n    tunnel: {\n      type: Object,\n      required: true\n    },\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      clipboardText: ''\n    }\n  },\n  watch: {\n    clipboardText(newValue) {\n      this.sendDataToRemoteClipboard(newValue)\n      this.setLocalClipboard(newValue)\n    }\n  },\n  methods: {\n    sendClipboardToRemote() {\n      if (navigator.clipboard && navigator.clipboard.readText) {\n        navigator.clipboard.readText().then((text) => {\n          if (text !== this.clipboardText) {\n            this.sendDataToRemoteClipboard(text)\n            this.clipboardText = text\n          }\n        })\n      }\n    },\n    updateVisible(value) {\n      this.$emit('update:visible', value)\n    },\n    sendDataToRemoteClipboard(value) {\n      const data = {\n        type: 'text/plain',\n        data: value\n      }\n      if (!this.client) {\n        return\n      }\n      this.clipboardText = value\n      let writer\n      // Create stream with proper mimetype\n      const stream = this.client.createClipboardStream(data.type)\n\n      // Send data as a string if it is stored as a string\n      if (typeof data.data === 'string') {\n        writer = new Guacamole.StringWriter(stream)\n        writer.sendText(data.data)\n        writer.sendEnd()\n        this.$log.debug('send text: ', data)\n      } else {\n        // Write File/Blob asynchronously\n        writer = new Guacamole.BlobWriter(stream)\n        writer.oncomplete = function clipboardSent() {\n          writer.sendEnd()\n        }\n        // Begin sending data\n        this.$log.debug('Send blob: ', data)\n        writer.sendBlob(data.data)\n      }\n    },\n    receiveClientClipboard(stream, mimetype) {\n      this.$log.debug('Recv clipboard: ', stream, mimetype)\n      let reader\n      // If the received data is text, read it as a simple string\n      if (/^text\\//.exec(mimetype)) {\n        reader = new Guacamole.StringReader(stream)\n\n        // Assemble received data into a single string\n        let data = ''\n        reader.ontext = (text) => {\n          data += text\n        }\n\n        // Set clipboard contents once stream is finished\n        reader.onend = async() => {\n          this.clipboardText = data\n          if (navigator.clipboard) {\n            await navigator.clipboard.writeText(data)\n          }\n        }\n        // eslint-disable-next-line brace-style\n      }\n      // Otherwise read the clipboard data as a Blob\n      else {\n        reader = new Guacamole.BlobReader(stream, mimetype)\n        reader.onprogress = (text) => {\n          this.$log.debug('blobReceived: ', text)\n        }\n        reader.onend = () => {\n          this.clipboardText = reader.getBlob()\n        }\n      }\n    },\n    setLocalClipboard(data) {\n      if (navigator.clipboard) {\n        navigator.clipboard.writeText(data)\n      }\n    },\n    onCloseDrawer() {\n      this.$emit('closeDrawer')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.clipboard {\n  position: relative;\n  -moz-border-radius: 0.25em;\n  -webkit-border-radius: 0.25em;\n  border-radius: 0.25em;\n  white-space: pre;\n  font-size: 1em;\n  overflow: auto;\n  padding-left: 10px;\n  height: 100%;\n  width: calc(100% - 20px);\n\n}\n\n.clipboard div {\n  margin: 0;\n}\n\n.clipboard .el-textarea__inner {\n  background-color: #303133;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacClipboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacClipboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GuacClipboard.vue?vue&type=template&id=2b702b8b&scoped=true&\"\nimport script from \"./GuacClipboard.vue?vue&type=script&lang=js&\"\nexport * from \"./GuacClipboard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GuacClipboard.vue?vue&type=style&index=0&id=2b702b8b&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b702b8b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-drawer',{staticClass:\"fileUploaderDraw\",attrs:{\"direction\":\"ltr\",\"title\":_vm.$t('Files'),\"visible\":_vm.show},on:{\"update:visible\":_vm.updateShow,\"close\":_vm.onCloseDrawer}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-file\",attrs:{\"action\":\"\",\"multiple\":true,\"file-list\":_vm.fileList,\"auto-upload\":true,\"http-request\":_vm.uploadFile,\"on-success\":_vm.refresh}},[_c('el-button',{staticClass:\"upload-btn\",attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(_vm._s(_vm.$t('UploadFile')))]),_c('el-button',{staticClass:\"upload-btn\",staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"default\"},on:{\"click\":_vm.clearFileList}},[_vm._v(_vm._s(_vm.$t('ClearDone')))])],1),_c('div',{staticClass:\"fileZone\",staticStyle:{\"padding\":\"20px\"}},[_c('el-row',{staticClass:\"currentFolder\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('span',{on:{\"click\":_vm.changeParentFolder}},[_vm._v(_vm._s(_vm.currentFolder.streamName)+\" \")])]),_c('el-col',{attrs:{\"span\":6,\"offset\":10}},[_c('i',{staticClass:\"el-icon-refresh\",staticStyle:{\"padding-left\":\"20px\"},on:{\"click\":_vm.refresh}})])],1),_c('div',{staticClass:\"fileList\"},_vm._l((_vm.sortedFiles),function(item,index){return _c('GuacFile',{key:index,attrs:{\"file-item\":item},on:{\"downloadFile\":_vm.downloadFile,\"changeFolder\":_vm.changeFolder}})}),1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"fileItem\"},[(_vm.fileItem.type==='NORMAL')?_c('i',{staticClass:\"el-icon-document\"}):_c('i',{staticClass:\"el-icon-folder\"}),_c('el-link',{staticClass:\"filename\",on:{\"click\":_vm.clickFile}},[_vm._v(\" \"+_vm._s(_vm.filename)+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"fileItem\">\n    <i v-if=\"fileItem.type==='NORMAL'\" class=\"el-icon-document\" />\n    <i v-else class=\"el-icon-folder\" />\n    <el-link class=\"filename\" @click=\"clickFile\"> {{ filename }} </el-link>\n  </div>\n</template>\n\n<script>\nimport { FileType } from '@/utils/common'\n/*\n{\n  mimetype:   String,\n  streamName: String,\n  type:       FileType.NORMAL,\n  name:       String,\n  parent:     FILE,\n  files:      {},\n}\n */\nexport default {\n  name: 'GuacFile',\n  props: {\n    fileItem: {\n      type: Object,\n      default: null\n    }\n  },\n  computed: {\n    filename() {\n      const filename = this.fileItem.name\n      const filenameLen = filename.length\n      if (filenameLen < 45) {\n        return filename\n      } else {\n        return filename.slice(0, 30) + '...' + filename.slice(filenameLen - 15, filenameLen)\n      }\n    }\n  },\n  methods: {\n    clickFile() {\n      if (this.fileItem.type === FileType.NORMAL) {\n        this.$emit('downloadFile', this.fileItem)\n      } else {\n        this.$emit('changeFolder', this.fileItem)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.fileItem {\n  cursor: pointer;\n}\n\n.filename {\n  padding-left: 6px;\n  color: #afa8a8;\n}\n\n.filename:hover{\n  color: #faf7f7 !important;\n}\n\n.el-link:after{\n  border-color: #faf7f7 !important;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GuacFile.vue?vue&type=template&id=648d08b1&scoped=true&\"\nimport script from \"./GuacFile.vue?vue&type=script&lang=js&\"\nexport * from \"./GuacFile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GuacFile.vue?vue&type=style&index=0&id=648d08b1&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"648d08b1\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <el-drawer\n      direction=\"ltr\"\n      :title=\"$t('Files')\"\n      :visible=\"show\"\n      class=\"fileUploaderDraw\"\n      @update:visible=\"updateShow\"\n      @close=\"onCloseDrawer\"\n    >\n      <el-upload\n        ref=\"upload\"\n        class=\"upload-file\"\n        action=\"\"\n        :multiple=\"true\"\n        :file-list=\"fileList\"\n        :auto-upload=\"true\"\n        :http-request=\"uploadFile\"\n        :on-success=\"refresh\"\n      >\n        <el-button slot=\"trigger\" size=\"small\" class=\"upload-btn\" type=\"primary\">{{ $t('UploadFile') }}</el-button>\n        <el-button size=\"small\" type=\"default\" class=\"upload-btn\" style=\"margin-left: 10px\" @click=\"clearFileList\">{{ $t('ClearDone') }}</el-button>\n      </el-upload>\n      <div style=\"padding: 20px\" class=\"fileZone\">\n        <el-row :gutter=\"20\" class=\"currentFolder\">\n          <el-col :span=\"6\">\n            <span @click=\"changeParentFolder\">{{ currentFolder.streamName }} </span>\n          </el-col>\n          <el-col :span=\"6\" :offset=\"10\">\n            <i class=\"el-icon-refresh\" style=\"padding-left: 20px;\" @click=\"refresh\" />\n          </el-col>\n        </el-row>\n        <div class=\"fileList\">\n          <GuacFile\n            v-for=\"(item ,index) in sortedFiles\"\n            :key=\"index\"\n            :file-item=\"item\"\n            @downloadFile=\"downloadFile\"\n            @changeFolder=\"changeFolder\"\n          />\n        </div>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport Guacamole from 'guacamole-common-js'\nimport { BaseAPIURL, FileType, isDirectory, sanitizeFilename } from '@/utils/common'\nimport GuacFile from './GuacFile'\nimport { ErrorStatusCodes } from '@/utils/status'\nimport { getLanguage } from '@/i18n'\n\nexport default {\n  name: 'GuacFileSystem',\n  components: {\n    GuacFile\n  },\n  props: {\n    client: {\n      type: Object,\n      required: true\n    },\n    tunnel: {\n      type: Object,\n      required: true\n    },\n    show: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      files: {},\n      currentFolder: {\n        mimetype: Guacamole.Object.STREAM_INDEX_MIMETYPE,\n        streamName: Guacamole.Object.ROOT_STREAM,\n        type: 'DIRECTORY',\n        files: {},\n        parent: null\n      },\n      fileList: [],\n      currentFilesystem: {\n        object: null,\n        name: ''\n      }\n    }\n  },\n  computed: {\n    sortedFiles: function() {\n      const unsortedFiles = []\n      for (const name in this.files) { unsortedFiles.push(this.files[name]) }\n      const ret = unsortedFiles.sort(function fileComparator(a, b) {\n        // Directories come before non-directories\n        if (isDirectory(a) && !isDirectory(b)) { return -1 }\n\n        // Non-directories come after directories\n        if (!isDirectory(a) && isDirectory(b)) { return 1 }\n\n        // All other combinations are sorted by name\n        return a.name.localeCompare(b.name)\n      })\n      return ret\n    },\n    guacObject() {\n      return this.currentFilesystem.object\n    }\n  },\n  mounted: function() {\n  },\n  destroyed: function() {\n    this.$log.debug('destroyed GuacFileSystem')\n  },\n  methods: {\n    clearFileList() {\n      this.fileList.splice(0, this.fileList.length)\n    },\n    fileSystemReceived(object, name) {\n      this.$log.debug('fileSystemReceived ', object, name)\n      this.currentFilesystem.object = object\n      this.currentFilesystem.name = name\n\n      this.updateDirectory(this.currentFolder).then(files => {\n        this.$log.debug(files)\n        this.files = files\n      })\n    },\n    updateShow(value) {\n      this.$log.debug('Update show to: ', value)\n      this.$emit('update:show', value)\n    },\n    onCloseDrawer() {\n      this.$emit('closeDrawer')\n    },\n    onDownloadFile(stream, mimetype, filename) {\n      this.$log.debug('On download file')\n      this.clientFileReceived(stream, mimetype, filename)\n    },\n    clientFileReceived(stream, mimetype, filename) {\n      this.$log.debug('clientFileReceived, ', this.tunnel.uuid, stream, mimetype, filename)\n      // Build download URL\n      const url = BaseAPIURL +\n          '/tunnels/' + encodeURIComponent(this.tunnel.uuid) +\n          '/streams/' + encodeURIComponent(stream.index) +\n          '/' + encodeURIComponent(sanitizeFilename(filename))\n\n      // Create temporary hidden iframe to facilitate download\n      const iframe = document.createElement('iframe')\n      iframe.style.position = 'fixed'\n      iframe.style.border = 'none'\n      iframe.style.width = '1px'\n      iframe.style.height = '1px'\n      iframe.style.left = '-1px'\n      iframe.style.top = '-1px'\n\n      // The iframe MUST be part of the DOM for the download to occur\n      document.body.appendChild(iframe)\n\n      // Automatically remove iframe from DOM when download completes, if\n      // browser supports tracking of iframe downloads via the \"load\" event\n      iframe.onload = function downloadComplete() {\n        document.body.removeChild(iframe)\n      }\n\n      // Acknowledge (and ignore) any received blobs\n      stream.onblob = function acknowledgeData() {\n        stream.sendAck('OK', Guacamole.Status.Code.SUCCESS)\n      }\n\n      // Automatically remove iframe from DOM a few seconds after the stream\n      // ends, in the browser does NOT fire the \"load\" event for downloads\n      stream.onend = function downloadComplete() {\n        window.setTimeout(function cleanupIframe() {\n          if (iframe.parentElement) {\n            document.body.removeChild(iframe)\n          }\n        }, 500)\n        this.loadingText = ''\n      }.bind(this)\n      this.loadingText = 'downloading file'\n      // Begin download\n      iframe.src = url\n      this.$log.debug(url)\n    },\n\n    fileDrop: function(e) {\n      e.stopPropagation()\n      e.preventDefault()\n      const dt = e.dataTransfer\n      const files = dt.files\n      this.handleFiles(files[0]).then(() => {\n        this.$message(files[0].name + ' ' + this.$t('UploadSuccess'))\n      }).catch(status => {\n        let msg = status.message\n        if (getLanguage() === 'cn') {\n          msg = this.$t(ErrorStatusCodes[status.code]) || status.message\n        }\n        this.$warning(msg)\n      })\n    },\n    handleFiles: function(file, object, streamName, progressCallback) {\n      const client = this.client\n      const tunnel = this.tunnel\n      const vm = this\n      let stream\n      if (!object) {\n        stream = client.createFileStream(file.type, sanitizeFilename(file.name).replace(/[:]+/g, '_'))\n      } else {\n        stream = object.createOutputStream(file.type, streamName)\n      }\n      return new Promise(function(resolve, reject) {\n        // Upload file once stream is acknowledged\n        stream.onack = function beginUpload(status) {\n          // Notify of any errors from the Guacamole server\n          if (status.isError()) {\n            vm.$log.debug('Upload error', status.code, status)\n            reject(status)\n            return\n          }\n          const uploadToStream = function uploadStream(tunnel, stream, file, progressCallback) {\n            // Build upload URL\n            const url = BaseAPIURL +\n                '/tunnels/' + encodeURIComponent(tunnel) +\n                '/streams/' + encodeURIComponent(stream.index) +\n                '/' + encodeURIComponent(sanitizeFilename(file.name))\n            const xhr = new XMLHttpRequest()\n            xhr.withCredentials = true\n            // Invoke provided callback if upload tracking is supported\n            if (progressCallback && xhr.upload) {\n              xhr.upload.addEventListener('progress', function updateProgress(e) {\n                progressCallback(e)\n              })\n            }\n            // Resolve/reject promise once upload has stopped\n            xhr.onreadystatechange = () => {\n              // Ignore state changes prior to completion\n              if (xhr.readyState !== 4) { return }\n\n              // Resolve if HTTP status code indicates success\n              if (xhr.status >= 200 && xhr.status < 300) {\n                vm.$log.debug('Upload load success')\n                resolve()\n                // eslint-disable-next-line brace-style\n              }\n              // Parse and reject with resulting JSON error\n              // eslint-disable-next-line brace-style\n              else if (xhr.getResponseHeader('Content-Type') === 'application/json') {\n                vm.$log.debug('failed upload ', xhr.responseText)\n                // eslint-disable-next-line brace-style\n              }\n              // Warn of lack of permission of a proxy rejects the upload\n              else if (xhr.status >= 400 && xhr.status < 500) {\n                vm.$log.debug('Upload failed: ', xhr.status)\n                reject(xhr.status)\n                // eslint-disable-next-line brace-style\n              }\n              // Assume internal error for all other cases\n              else {\n                vm.$log.debug('Upload failed: ', xhr.status)\n                reject(xhr.status)\n              }\n            }\n            // Perform upload\n            xhr.open('POST', url, true)\n            const fd = new FormData()\n            fd.append('file', file)\n            xhr.send(fd)\n          }\n          // Begin upload\n          uploadToStream(tunnel.uuid, stream, file, progressCallback)\n\n          // Ignore all further acks\n          stream.onack = null\n        }\n      })\n    },\n    onChangeFolder(fileItem) {\n      this.currentFolder = fileItem\n    },\n    uploadFile(fileObj) {\n      this.$log.debug('uploadFile: ', fileObj)\n      const file = fileObj.file\n      let streamName\n      if (this.currentFolder) {\n        streamName = this.currentFolder.streamName + '/' + sanitizeFilename(file.name).replace(/[:]+/g, '_')\n      }\n      this.$log.debug('File is: ', file)\n      let finished = false\n      const step = fileObj.file.size > 1024 * 1024 * 1024 ? 0.2 : 0.4\n      const fakeProcess = function fakeProcess(count) {\n        if (finished) {\n          return\n        }\n        const fakeE = {\n          percent: 50 + step * count\n        }\n        if (fakeE.percent >= 100) {\n          return\n        }\n        fileObj.onProgress(fakeE)\n        setTimeout(function() {\n          fakeProcess(count + 1)\n        }, 1000 * 5)\n      }\n      const onprogress = function progress(e) {\n        if (e.total > 0) {\n          e.percent = e.loaded / e.total * 50\n        }\n        fileObj.onProgress(e)\n        if (e.loaded === e.total) {\n          setTimeout(function() {\n            fakeProcess(1)\n          }, 1000 * 5)\n        }\n      }\n      this.handleFiles(file, this.currentFilesystem.object, streamName, onprogress).then((xhr) => {\n        fileObj.onSuccess('Ok')\n        this.refresh()\n        finished = true\n        const fileName = file.name.length > 20 ? file.name.substring(0, 20) + '...' : file.name\n        this.$message(fileName + ' ' + this.$t('UploadSuccess'))\n      }).catch(err => {\n        fileObj.onError(err)\n        this.$log.debug('Upload error: ', err)\n        let msg = err.message\n        if (getLanguage() === 'cn') {\n          msg = this.$t(ErrorStatusCodes[err.code]) || err.message\n        }\n        this.$warning(msg)\n      })\n    },\n    downloadFile(fileItem) {\n      this.$log.debug('Download file: ', fileItem)\n      const path = fileItem.streamName\n      const downloadStreamReceived = function downloadStreamReceived(stream, mimetype) {\n        // Parse filename from string\n        const filename = path.match(/(.*[\\\\/])?(.*)/)[2]\n        // Start download\n        this.onDownloadFile(stream, mimetype, filename)\n      }.bind(this)\n      this.guacObject.requestInputStream(path, downloadStreamReceived)\n    },\n\n    changeFolder(fileItem) {\n      // this.updateDirectory(fileItem)\n      this.$log.debug('ChangeFolder ', fileItem)\n      this.updateDirectory(fileItem).then(files => {\n        this.files = files\n        this.onChangeFolder(fileItem)\n        // this.$emit('ChangeFolder', fileItem)\n      })\n    },\n    changeParentFolder() {\n      if (this.currentFolder.parent === null) {\n        this.$log.debug('没有parent目录了')\n        return\n      }\n      this.$log.debug('切换到parent目录了', this.currentFolder)\n      this.updateDirectory(this.currentFolder.parent).then(files => {\n        this.files = files\n        this.changeFolder(this.currentFolder.parent)\n      })\n    },\n    updateDirectory(file) {\n      if (!this.guacObject) {\n        return new Promise((resolve, reject) => {\n          reject('No guacObject')\n        })\n      }\n      const guacObject = this.guacObject\n      return new Promise(function(resolve, reject) {\n        // Do not attempt to refresh the contents of directories\n        if (file.mimetype !== Guacamole.Object.STREAM_INDEX_MIMETYPE) { return }\n        // Request contents of given file\n        guacObject.requestInputStream(file.streamName, function handleStream(stream, mimetype) {\n          // Ignore stream if mimetype is wrong\n          if (mimetype !== Guacamole.Object.STREAM_INDEX_MIMETYPE) {\n            stream.sendAck('Unexpected mimetype', Guacamole.Status.Code.UNSUPPORTED)\n            return\n          }\n\n          // Signal server that data is ready to be received\n          stream.sendAck('Ready', Guacamole.Status.Code.SUCCESS)\n\n          // Read stream as JSON\n          var reader = new Guacamole.JSONReader(stream)\n\n          // Acknowledge received JSON blobs\n          reader.onprogress = function onprogress() {\n            stream.sendAck('Received', Guacamole.Status.Code.SUCCESS)\n          }\n\n          // Reset contents of directory\n          reader.onend = function jsonReady() {\n            // Empty contents\n            file.files = {}\n\n            // Determine the expected filename prefix of each stream\n            var expectedPrefix = file.streamName\n            if (expectedPrefix.charAt(expectedPrefix.length - 1) !== '/') { expectedPrefix += '/' }\n\n            // For each received stream name\n            var mimetypes = reader.getJSON()\n            for (var name in mimetypes) {\n              // Assert prefix is correct\n              if (name.substring(0, expectedPrefix.length) !== expectedPrefix) { continue }\n\n              // Extract filename from stream name\n              var filename = name.substring(expectedPrefix.length)\n\n              // Deduce type from mimetype\n              var type = FileType.NORMAL\n              if (mimetypes[name] === Guacamole.Object.STREAM_INDEX_MIMETYPE) { type = FileType.DIRECTORY }\n\n              // Add file entry\n              file.files[filename] = {\n                mimetype: mimetypes[name],\n                streamName: name,\n                type: type,\n                parent: file,\n                name: filename\n              }\n            }\n            resolve(file.files)\n          }\n        })\n      })\n    },\n\n    refresh() {\n      this.files = []\n      this.updateDirectory(this.currentFolder).then(files => {\n        this.files = files\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.fileUploaderDraw ::v-deep .el-drawer__header {\n  line-height: 30px;\n  margin-bottom: 20px;\n}\n\n.upload-file {\n  padding: 20px;\n  background-color: #737477;\n}\n\n.upload-file ::v-deep .el-upload-list__item .el-icon-upload-success {\n  color: #67C23A !important;\n}\n\n.fileZone {\n  color: #afa8a8;\n  font-size: 14px;\n  line-height: 25px;\n}\n\n.el-icon-refresh:hover {\n  color: #ffffff;\n}\n\n.fileList {\n  overflow: auto;\n  padding-left: 10px;\n  height: calc(100vh - 200px);\n}\n\n.currentFolder {\n  cursor: pointer;\n  font-weight: bold;\n  padding-bottom: 20px\n}\n\n.upload-btn {\n  background-color: #363638;\n  border-color:  #363638;\n  color: #737477;\n}\n\n.upload-btn:hover{\n  color: #faf7f7;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacFileSystem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacFileSystem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GuacFileSystem.vue?vue&type=template&id=0fbe81ba&scoped=true&\"\nimport script from \"./GuacFileSystem.vue?vue&type=script&lang=js&\"\nexport * from \"./GuacFileSystem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GuacFileSystem.vue?vue&type=style&index=0&id=0fbe81ba&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0fbe81ba\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"container\",staticClass:\"container\",class:{show: _vm.show}},[_c('div',{staticClass:\"background\"}),_c('div',{staticClass:\"right-panel\"},[_c('div',{staticClass:\"right-panel-items\"},[_vm._t(\"default\")],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    ref=\"container\"\n    :class=\"{show: show}\"\n    class=\"container\"\n  >\n    <div class=\"background\" />\n    <div class=\"right-panel\">\n      <div class=\"right-panel-items\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { addClass, removeClass } from '@/utils/common'\n\nexport default {\n  name: 'RightPanel',\n  props: {\n    clickNotClose: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      show: false\n    }\n  },\n  watch: {\n    show(value) {\n      if (value && !this.clickNotClose) {\n        this.addEventClick()\n      }\n      if (value) {\n        addClass(document.body, 'showRightPanel')\n      } else {\n        removeClass(document.body, 'showRightPanel')\n      }\n    }\n  },\n  mounted() {\n    // this.init()\n    this.insertToBody()\n  },\n  beforeDestroy() {\n    const element = this.$refs.container\n    element.remove()\n  },\n  methods: {\n    init() {\n      this.$nextTick(() => {\n        const dragDiv = this.$refs.dragDiv\n        const clientOffset = {}\n        dragDiv.addEventListener('mousedown', (event) => {\n          const offsetX = dragDiv.getBoundingClientRect().left\n          const offsetY = dragDiv.getBoundingClientRect().top\n          const innerX = event.clientX - offsetX\n          const innerY = event.clientY - offsetY\n\n          clientOffset.clientX = event.clientX\n          clientOffset.clientY = event.clientY\n          document.onmousemove = function(event) {\n            dragDiv.style.left = event.clientX - innerX + 'px'\n            dragDiv.style.top = event.clientY - innerY + 'px'\n            const dragDivTop = window.innerHeight - dragDiv.getBoundingClientRect().height\n            const dragDivLeft = window.innerWidth - dragDiv.getBoundingClientRect().width\n            dragDiv.style.left = dragDivLeft + 'px'\n            dragDiv.style.left = '-48px'\n            if (dragDiv.getBoundingClientRect().top <= 0) {\n              dragDiv.style.top = '0px'\n            }\n            if (dragDiv.getBoundingClientRect().top >= dragDivTop) {\n              dragDiv.style.top = dragDivTop + 'px'\n            }\n          }\n          document.onmouseup = function() {\n            document.onmousemove = null\n            document.onmouseup = null\n          }\n        }, false)\n        dragDiv.addEventListener('mouseup', (event) => {\n          const clientX = event.clientX\n          const clientY = event.clientY\n          if (clientX === clientOffset.clientX && clientY === clientOffset.clientY) {\n            this.show = !this.show\n          }\n        })\n      })\n    },\n    addEventClick() {\n      window.addEventListener('click', this.closeSidebar)\n    },\n    closeSidebar(evt) {\n      const parent = evt.target.closest('.right-panel')\n      if (!parent) {\n        this.show = false\n        window.removeEventListener('click', this.closeSidebar)\n      }\n    },\n    insertToBody() {\n      const element = this.$refs.container\n      const body = document.querySelector('body')\n      body.insertBefore(element, body.firstChild)\n    },\n    toggle() {\n      this.show = !this.show\n    }\n  }\n}\n</script>\n\n<style scoped>\n.background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  opacity: 0;\n  transition: opacity .3s cubic-bezier(.7, .3, .1, 1);\n  background: rgba(0, 0, 0, .3);\n  z-index: -1;\n}\n\n.right-panel {\n  width: 100%;\n  max-width: 260px;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  right: 0;\n  box-shadow: 0 0 15px 0 rgba(0, 0, 0, .05);\n  transition: all .25s cubic-bezier(.7, .3, .1, 1);\n  transform: translate(100%);\n  background: #303133;\n  z-index: 1200;\n}\n\n.right-panel-items {\n  height: 100%;\n  overflow-y: auto;\n}\n\n.right-panel-items::-webkit-scrollbar-track {\n  box-shadow: none;\n  background-color: transparent;\n}\n\n.right-panel-items::-webkit-scrollbar {\n  width: 9px;\n}\n\n.show {\n  transition: all .3s cubic-bezier(.7, .3, .1, 1);\n}\n\n.show .background {\n  z-index: 1000;\n  opacity: 1;\n  width: 100%;\n  height: 100%;\n}\n\n.show .right-panel {\n  transform: translate(0);\n}\n\n.handle-button {\n  position: absolute;\n  top: 30%;\n  left: -48px;\n  width: 48px;\n  height: 45px;\n  line-height: 45px;\n  box-sizing: border-box;\n  text-align: center;\n  font-size: 24px;\n  border-radius: 20px 0 0 20px;\n  z-index: 0;\n  pointer-events: auto;\n  color: #fff;\n  opacity: .8;\n  background-color: rgba(99, 89, 89, .7);\n}\n\n.handle-button:hover {\n  cursor: pointer;\n  background-color: rgba(99, 89, 89, .9);\n}\n\n.handle-button i {\n  font-size: 20px;\n  line-height: 44px;\n  vertical-align: top;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RightPanel.vue?vue&type=template&id=68aec19e&scoped=true&\"\nimport script from \"./RightPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./RightPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RightPanel.vue?vue&type=style&index=0&id=68aec19e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68aec19e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"setting\"},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('ul',{staticStyle:{\"padding\":\"0\"}},[_vm._l((_vm.settings),function(i,index){return _c('li',{key:index,staticClass:\"item\"},[_c('el-button',{staticClass:\"item-button\",class:'icon ' + i.icon,attrs:{\"type\":\"text\",\"disabled\":i.disabled()},on:{\"click\":function($event){$event.stopPropagation();i.click && _vm.itemClick(i)}}},[_vm._v(\" \"+_vm._s(i.title)+\" \"+_vm._s(i.content && Object.keys(i.content).length > 0 ? Object.keys(i.content).length : null)+\" \")]),(i.content)?_c('div',{staticClass:\"content\"},_vm._l((i.content),function(item,key){return _c('el-button',{key:key,staticClass:\"content-item\",attrs:{\"type\":\"text\",\"disabled\":i.disabled()},on:{\"click\":function($event){i.itemClick && i.itemClick(item.keys)}}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1):_vm._e()],1)}),_c('li',{staticClass:\"item\"},[_vm._t(\"default\")],2)],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"setting\">\n    <h3 class=\"title\">{{ title }}</h3>\n    <ul style=\"padding: 0\">\n      <li\n        v-for=\"(i, index) in settings\"\n        :key=\"index\"\n        class=\"item\"\n      >\n        <el-button\n          type=\"text\"\n          class=\"item-button\"\n          :disabled=\"i.disabled()\"\n          :class=\"'icon ' + i.icon\"\n          @click.stop=\"i.click && itemClick(i)\"\n        >\n          {{ i.title }}\n          {{ i.content && Object.keys(i.content).length > 0 ? Object.keys(i.content).length : null }}\n        </el-button>\n        <div v-if=\"i.content\" class=\"content\">\n          <el-button\n            v-for=\"(item, key) of i.content\"\n            :key=\"key\"\n            class=\"content-item\"\n            type=\"text\"\n            :disabled=\"i.disabled()\"\n            @click=\"i.itemClick && i.itemClick(item.keys)\"\n          >\n            {{ item.name }}\n          </el-button>\n        </div>\n      </li>\n      <li class=\"item\">\n        <slot />\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Settings',\n  props: {\n    title: {\n      type: String,\n      required: true\n    },\n    settings: {\n      type: Array,\n      default: () => []\n    }\n  },\n  methods: {\n    itemClick(item) {\n      this.$parent.show = false\n      item.click()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.setting {\n  padding: 24px 24px;\n}\n\n.title {\n  text-align: left;\n  padding-left: 12px;\n  font-size: 18px;\n  color: #ffffff;\n}\n\n.item {\n  color: rgb(255, 255, 255);\n  font-size: 14px;\n  list-style-type: none;\n  cursor: pointer;\n  border-radius: 2px;\n  line-height: 14px;\n}\n\n.item-button {\n  padding-left: 10px;\n  width: 100%;\n  text-align: left;\n  color: #ffffff;\n}\n\n.item-button.is-disabled {\n  color: rgb(0, 0, 0, 0.5);\n}\n\n.item-button.is-disabled:hover {\n  color: rgb(0, 0, 0, 0.5);\n  background: none;\n}\n\n.item-button:hover {\n  background: rgba(0, 0, 0, .5);\n}\n\n.content {\n  padding: 4px 6px 4px 25px;\n}\n\n.content-item {\n  font-size: 13px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  padding: 4px 0;\n  color: #ffffff;\n  margin-left: 0;\n  display: block;\n  width: 100%;\n  text-align: left;\n}\n\n.content-item:hover {\n  border-radius: 2px;\n  background: rgba(0, 0, 0, .5);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=ff57fe8a&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=ff57fe8a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ff57fe8a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-container>\n    <el-main>\n      <el-row\n        v-loading=\"loading\"\n        :element-loading-text=\"loadingText\"\n        element-loading-background=\"#1f1b1b\"\n      >\n        <div :style=\"containerStyle\">\n          <div id=\"displayOuter\">\n            <div id=\"displayMiddle\">\n              <div id=\"display\" />\n            </div>\n          </div>\n        </div>\n      </el-row>\n    </el-main>\n    <RightPanel ref=\"panel\">\n      <Settings :settings=\"settings\" :title=\"$t('Settings')\">\n        <el-button type=\"text\" class=\"item-button el-icon-c-scale-to-original\">\n          {{ $t('Display') }}\n        </el-button>\n        <div class=\"content\"> <i class=\"el-icon-remove-outline\" @click=\"decreaseScale\" />\n          <span>{{ scaleValue }}%</span>\n          <i class=\"el-icon-circle-plus-outline\" @click=\"increaseScale\" />\n          <el-form label-position=\"left\">\n            <el-form-item :label=\"$t('AutoFit')\">\n              <el-switch v-model=\"autoFit\" />\n            </el-form-item>\n          </el-form>\n        </div>\n      </Settings>\n    </RightPanel>\n    <GuacClipboard\n      v-if=\"clipboardInited\"\n      ref=\"clipboard\"\n      :visible.sync=\"clipboardDrawer\"\n      :client=\"client\"\n      :tunnel=\"tunnel\"\n      @closeDrawer=\"onCloseDrawer\"\n    />\n    <GuacFileSystem\n      v-if=\"fileSystemInited\"\n      ref=\"fileSystem\"\n      :client=\"client\"\n      :tunnel=\"tunnel\"\n      :show.sync=\"fileDrawer\"\n      @closeDrawer=\"onCloseDrawer\"\n    />\n  </el-container>\n</template>\n\n<script>\nimport Guacamole from 'guacamole-common-js'\nimport { getSupportedMimetypes } from '@/utils/image'\nimport { getSupportedGuacAudios } from '@/utils/audios'\nimport { getSupportedGuacVideos } from '@/utils/video'\nimport { getCurrentConnectParams } from '@/utils/common'\nimport { createSession, deleteSession } from '@/api/session'\nimport GuacClipboard from './GuacClipboard'\nimport GuacFileSystem from './GuacFileSystem'\nimport RightPanel from './RightPanel'\nimport Settings from './Settings'\nimport { default as i18n, getLanguage } from '@/i18n'\nimport { ErrorStatusCodes, ConvertAPIError, ConvertGuacamoleError } from '@/utils'\nimport { localStorageGet } from '@/utils/common'\n\nconst pixelDensity = 1\nconst sideWidth = 0\nexport default {\n  name: 'GuacamoleConnect',\n  components: {\n    GuacClipboard,\n    GuacFileSystem,\n    RightPanel,\n    Settings\n  },\n  data() {\n    return {\n      apiPrefix: '/api',\n      wsPrefix: '/lion/ws/connect/',\n      dialogFormVisible: false,\n      requireParams: [],\n      isMenuCollapse: true,\n      hasFileSystem: false,\n      clipboardDrawer: false,\n      fileDrawer: false,\n      loading: true,\n      session: null,\n      tunnelState: '',\n      fileSystemInited: false,\n      clipboardInited: false,\n      loadingText: i18n.t('Connecting') + ' ...',\n      clientState: 'Connecting',\n      localCursor: false,\n      client: null,\n      clientProperties: {\n        autoFit: true\n      },\n      tunnel: null,\n      displayWidth: window.innerWidth - sideWidth,\n      displayHeight: window.innerHeight,\n      connected: false,\n      clipboardData: {\n        type: 'text/plain',\n        data: ''\n      },\n      sink: null,\n      keyboard: null,\n      combinationKeys: [\n        {\n          keys: ['65307'],\n          name: 'Esc'\n        },\n        {\n          keys: ['65480'],\n          name: 'F11'\n        },\n        {\n          keys: ['65507', '65513', '65535'],\n          name: 'Ctrl+Alt+Delete'\n        },\n        {\n          keys: ['65507', '65513', '65288'],\n          name: 'Ctrl+Alt+Backspace'\n        },\n        {\n          keys: ['65515', '100'],\n          name: 'Windows+D'\n        },\n        {\n          keys: ['65515', '101'],\n          name: 'Windows+E'\n        },\n        {\n          keys: ['65515', '114'],\n          name: 'Windows+R'\n        },\n        {\n          keys: ['65515', '120'],\n          name: 'Windows+X'\n        },\n        {\n          keys: ['65515'],\n          name: 'Windows'\n        },\n        {\n          keys: ['65513', '65289'],\n          name: 'Alt+Tab'\n        }\n      ],\n      scale: 1,\n      timeout: null,\n      origin: null,\n      lunaId: null,\n      display: null,\n      autoFit: true\n    }\n  },\n  computed: {\n    containerStyle() {\n      return {\n        height: this.displayHeight + 'px',\n        width: this.displayWidth + 'px'\n      }\n    },\n    scaleValue() {\n      return Math.floor(this.scale * 100)\n    },\n    menuDisable: function() {\n      return !(this.clientState === 'Connected') || !(this.tunnelState === 'OPEN')\n    },\n    isRemoteApp: function() {\n      return this.session ? this.session.remote_app : false\n    },\n    title: function() {\n      if (this.isRemoteApp) {\n        return this.session.remote_app.name\n      }\n      return this.session.asset.hostname\n    },\n    settings() {\n      const settings = [\n        {\n          title: this.$t('Clipboard'),\n          icon: 'el-icon-document-copy',\n          disabled: () => (this.menuDisable || !this.clipboardInited),\n          click: () => (this.toggleClipboard())\n        },\n        {\n          title: this.$t('Files'),\n          icon: 'el-icon-folder',\n          disabled: () => ((!this.hasFileSystem) || this.menuDisable),\n          click: () => (this.toggleFileSystem())\n        }\n      ]\n      if (!this.isRemoteApp) {\n        settings.push({\n          title: this.$t('Shortcuts'),\n          icon: 'el-icon-position',\n          disabled: () => (this.menuDisable || this.isRemoteApp),\n          content: this.combinationKeys,\n          itemClick: (keys) => (this.handleKeys(keys))\n        })\n      }\n      return settings\n    }\n  },\n  watch: {\n    autoFit: function(val) {\n      if (val) {\n        this.updateDisplayScale()\n      }\n    }\n  },\n  mounted: function() {\n    const result = getCurrentConnectParams()\n    this.apiPrefix = result['api']\n    this.wsPrefix = result['ws']\n    const vm = this\n    createSession(result['api'], result['data']).then(res => {\n      window.addEventListener('beforeunload', e => this.beforeunloadFn(e))\n      window.addEventListener('unload', e => this.beforeunloadFn(e))\n      this.session = res.data\n      this.startConnect()\n    }).catch(err => {\n      const message = err.message || err\n      vm.$log.debug('err ', message)\n      const errArray = message.split(':')\n      vm.$error(vm.$t(ConvertAPIError(message)) + ': ' + errArray.slice(1).join(':'))\n      vm.loading = false\n    })\n    window.addEventListener('message', this.handleEventFromLuna, false)\n  },\n  methods: {\n    increaseScale() {\n      this.autoFit = false\n      this.scale += 0.1\n      this.display.scale(this.scale)\n    },\n    decreaseScale() {\n      this.autoFit = false\n      this.scale -= 0.1\n      if (this.scale < 0.5) {\n        this.scale = 0.5\n      }\n      this.display.scale(this.scale)\n    },\n    toggleFileSystem(e) {\n      if (this.menuDisable) {\n        return\n      }\n      this.fileDrawer = !this.fileDrawer\n    },\n    initFileSystem() {\n      this.fileSystemInited = true\n      setTimeout(() => {\n        const dropbox = document.getElementById('display')\n        dropbox.addEventListener('dragenter', function(e) {\n          e.stopPropagation()\n          e.preventDefault()\n        }, false)\n        dropbox.addEventListener('dragover', function(e) {\n          e.stopPropagation()\n          e.preventDefault()\n        }, false)\n        dropbox.addEventListener('drop', this.$refs.fileSystem.fileDrop, false)\n      }, 300)\n    },\n    initClipboard() {\n      if (this.session && this.session.permission) {\n        const actions = this.session.action_permission\n        const hasClipboardPermission = actions.enable_copy || actions.enable_paste\n        this.$log.debug(this.session.permission)\n        this.clipboardInited = hasClipboardPermission\n      }\n    },\n    beforeunloadFn(e) {\n      this.removeSession()\n    },\n    startConnect() {\n      this.getConnectString(this.session.id).then(connectionParams => {\n        this.connectGuacamole(connectionParams, this.wsPrefix)\n      })\n    },\n    onClientConnected() {\n      this.onWindowResize()\n      window.addEventListener('resize', this.debounceWindowResize)\n      window.onfocus = this.onWindowFocus\n      window.onblur = () => {\n        if (this.keyboard !== null) {\n          this.keyboard.reset()\n        }\n      }\n    },\n\n    handleEventFromLuna(evt) {\n      const msg = evt.data\n      switch (msg.name) {\n        case 'PING':\n          if (this.lunaId != null) {\n            return\n          }\n          this.lunaId = msg.id\n          this.origin = evt.origin\n          this.sendEventToLuna('PONG', null)\n          break\n        case 'OPEN':\n          this.$refs.panel.toggle()\n          break\n      }\n      console.log('Lion got post msg: ', msg)\n    },\n\n    sendEventToLuna(name, data) {\n      if (this.lunaId != null) {\n        window.parent.postMessage({ name: name, id: this.lunaId, data: data }, this.origin)\n      }\n    },\n\n    removeSession() {\n      deleteSession(this.apiPrefix, this.session.id).catch(err => {\n        this.$log.debug(err)\n      })\n    },\n    menuIndex(index, num) {\n      return index + num\n    },\n    toggleClipboard() {\n      if (this.menuDisable) {\n        return\n      }\n      this.clipboardDrawer = !this.clipboardDrawer\n    },\n\n    getAutoSize() {\n      const width = this.displayWidth\n      const height = this.displayHeight\n      this.$log.debug('auto size:', width, height)\n      return [width, height]\n    },\n\n    getGuaSize() {\n      const lunaSetting = localStorageGet('LunaSetting') || {}\n      const solution = lunaSetting['rdpResolution']\n      if (!solution || solution.toLowerCase() === 'auto' || solution.indexOf('x') === -1) {\n        this.$log.debug('Solution invalid: ', solution)\n        return this.getAutoSize()\n      }\n      let [width, height] = solution.split('x')\n      width = parseInt(width)\n      height = parseInt(height)\n      if (isNaN(width) || width < 100 || isNaN(height) || height < 100) {\n        this.$log.debug('Solution invalid2: ', solution)\n        return this.getAutoSize()\n      }\n      return [width, height]\n    },\n    getKeyboardLayout() {\n      const lunaSetting = localStorageGet('LunaSetting') || {}\n      const graphics = lunaSetting['graphics'] || {}\n      const keyboardLayout = graphics['keyboard_layout']\n      this.$log.debug('KeyboardLayout: ', keyboardLayout)\n      if (!keyboardLayout) {\n        return ''\n      }\n      return keyboardLayout\n    },\n\n    getConnectString(sessionId) {\n      // Calculate optimal width/height for display\n      const [optimalWidth, optimalHeight] = this.getGuaSize()\n      const keyboardLayout = this.getKeyboardLayout()\n      const optimalDpi = pixelDensity * 96\n      return new Promise((resolve, reject) => {\n        Promise.all([\n          getSupportedMimetypes(),\n          getSupportedGuacAudios(),\n          getSupportedGuacVideos()\n        ]).then(values => {\n          // [\"image/jpeg\", \"image/png\", \"image/webp\"]\n          const supportImages = values[0]\n          const supportAudios = values[1]\n          const supportVideos = values[2]\n          let connectString =\n              'SESSION_ID=' + encodeURIComponent(sessionId) +\n              '&GUAC_WIDTH=' + Math.floor(optimalWidth) +\n              '&GUAC_HEIGHT=' + Math.floor(optimalHeight) +\n              '&GUAC_DPI=' + Math.floor(optimalDpi) +\n              '&GUAC_KEYBOARD=' + encodeURIComponent(keyboardLayout)\n          this.$log.debug('Connect string: ', connectString)\n          supportImages.forEach(function(mimetype) {\n            connectString += '&GUAC_IMAGE=' + encodeURIComponent(mimetype)\n          })\n          supportAudios.forEach(function(mimetype) {\n            connectString += '&GUAC_AUDIO=' + encodeURIComponent(mimetype)\n          })\n          supportVideos.forEach(function(mimetype) {\n            connectString += '&GUAC_VIDEO=' + encodeURIComponent(mimetype)\n          })\n          resolve(connectString)\n        })\n      })\n    },\n\n    onTunnelStateChanged(state) {\n      switch (state) {\n        // Connection is being established\n        case Guacamole.Tunnel.State.CONNECTING:\n          this.tunnelState = 'CONNECTING'\n          this.$log.debug('Tunnel state change to Tunnel.State.CONNECTING ')\n          break\n\n          // Connection is established / no longer unstable\n        case Guacamole.Tunnel.State.OPEN:\n          this.tunnelState = 'OPEN'\n          this.$log.debug('Tunnel state change to Tunnel.State.OPEN ')\n          this.initFileSystem()\n          this.initClipboard()\n          break\n\n          // Connection is established but misbehaving\n        case Guacamole.Tunnel.State.UNSTABLE:\n          this.tunnelState = 'UNSTABLE'\n          this.$log.debug('Tunnel state change to Tunnel.State.UNSTABLE ')\n          break\n\n          // Connection has closed\n        case Guacamole.Tunnel.State.CLOSED:\n          this.tunnelState = 'CLOSED'\n          this.$log.debug('Tunnel state change to Tunnel.State.CLOSED ')\n          break\n        default:\n          this.tunnelState = 'unknown'\n          this.$log.debug('Tunnel state change tounknown ', state)\n          break\n      }\n    },\n\n    clientStateChanged(clientState) {\n      switch (clientState) {\n        // Idle\n        case 0:\n          this.clientState = 'IDLE'\n          this.$log.debug('clientState, IDLE')\n          break\n\n          // Ignore \"connecting\" state\n        case 1: // Connecting\n          this.clientState = 'Connecting'\n          this.$log.debug('clientState, Connecting')\n          break\n\n          // Connected + waiting\n        case 2:\n          this.clientState = 'Connected + waiting'\n          this.$log.debug('clientState, Connected + waiting')\n          break\n\n          // Connected\n        case 3:\n          this.clientState = 'Connected'\n          this.$log.debug('clientState, Connected ')\n          this.loading = false\n          // Send any clipboard data already provided\n          // if (managedClient.clipboardData)\n          //     ManagedClient.setClipboard(managedClient, managedClient.clipboardData);\n          //\n          // Begin streaming audio input if possible\n          var AUDIO_INPUT_MIMETYPE = 'audio/L16;rate=44100,channels=2'\n          var requestAudioStream = function requestAudioStream(client) {\n            // Create new audio stream, associating it with an AudioRecorder\n            const stream = client.createAudioStream(AUDIO_INPUT_MIMETYPE)\n            let recorder\n            try {\n              recorder = Guacamole.AudioRecorder.getInstance(stream, AUDIO_INPUT_MIMETYPE)\n            } catch (e) {\n              console.log('Get audio recorder error, ignore')\n              recorder = null\n            }\n\n            // If creation of the AudioRecorder failed, simply end the stream\n            // eslint-disable-next-line brace-style\n            if (!recorder) { stream.sendEnd() }\n            // Otherwise, ensure that another audio stream is created after this\n            // audio stream is closed\n            else { recorder.onclose = requestAudioStream.bind(this, client) }\n          }\n          requestAudioStream(this.client)\n          this.onClientConnected()\n          break\n\n          // Update history when disconnecting\n        case 4: // Disconnecting\n        case 5: // Disconnected\n          this.clientState = 'Disconnecting'\n          this.$log.debug('clientState, Disconnected ')\n          // this.closeDisplay('clientState Disconnecting')\n          var display = document.getElementById('display')\n          display.innerHTML = ''\n          this.sendEventToLuna('CLOSE', null)\n          break\n      }\n    },\n\n    clientOnErr(status) {\n      this.loading = false\n      this.$log.debug('clientOnErr', status)\n      this.closeDisplay(status)\n    },\n\n    closeDisplay(status) {\n      this.$log.debug(status, i18n.locale)\n      const code = status.code\n      let msg = status.message\n      const currentLang = getLanguage()\n      msg = ErrorStatusCodes[code] ? this.$t(ErrorStatusCodes[code]) : this.$t(ConvertGuacamoleError(status.message))\n      switch (code) {\n        case 1005:\n          // 管理员终断会话，特殊处理\n          if (currentLang === 'cn') {\n            msg = status.message + ' ' + msg\n          } else {\n            msg = msg + ' ' + status.message\n          }\n          break\n        case 1003:\n          msg = msg.replace('{PLACEHOLDER}', status.message)\n          break\n        case 1010:\n          msg = msg.replace('{PLACEHOLDER}', status.message)\n          break\n      }\n      this.$alert(msg, this.$t('ErrTitle'), {\n        confirmButtonText: this.$t('OK'),\n        callback: action => {\n          const display = document.getElementById('display')\n          if (this.client) {\n            // display.removeChild(this.client.getDisplay().getElement())\n            display.innerHTML = ''\n          }\n        }\n      })\n    },\n    onCursor(canvas, x, y) {\n      this.localCursor = true\n    },\n\n    handleMouseState(mouseState) {\n      // Do not attempt to handle mouse state changes if the client\n      // or display are not yet available\n      if (!this.client || !this.display) { return }\n      this.sendEventToLuna('MOUSEEVENT', '')\n      // Send mouse state, show cursor if necessary\n      this.display.showCursor(!this.localCursor)\n      this.sendScaledMouseState(mouseState)\n    },\n\n    sendScaledMouseState(mouseState) {\n      const scaledState = new Guacamole.Mouse.State(\n        mouseState.x / this.display.getScale(),\n        mouseState.y / this.display.getScale(),\n        mouseState.left,\n        mouseState.middle,\n        mouseState.right,\n        mouseState.up,\n        mouseState.down)\n      this.client.sendMouseState(scaledState)\n    },\n\n    handleEmulatedMouseState(mouseState) {\n      // Do not attempt to handle mouse state changes if the client\n      // or display are not yet available\n      if (!this.client || !this.display) { return }\n\n      // Ensure software cursor is shown\n      this.display.showCursor(true)\n      this.$log.debug('handleEmulatedMouseState', mouseState)\n      // Send mouse state, ensure cursor is visible\n      this.sendScaledMouseState(mouseState)\n    },\n\n    handleEmulatedMouseDown(mouseState) {\n      this.handleEmulatedMouseState(mouseState)\n      this.isMenuCollapse = true\n      this.sink.focus()\n      this.$log.debug('handleEmulatedMouseDown', mouseState)\n    },\n\n    onMouseDown(mouseState) {\n      document.body.focus()\n      this.handleMouseState(mouseState)\n      this.isMenuCollapse = true\n      this.sink.focus()\n    },\n\n    onMouseOut(mouseState) {\n      if (!this.display) return\n      this.display.showCursor(false)\n    },\n\n    onCloseDrawer() {\n      this.$log.debug('onCloseDrawer', this.sink)\n      this.sink.focus()\n    },\n\n    getPropScale() {\n      const display = this.client.getDisplay()\n      if (!display) {\n        return 1\n      }\n      const displayWidth = display.getWidth()\n      const displayHeight = display.getHeight()\n      if (displayWidth === 0 || displayHeight === 0) {\n        return 1\n      }\n      const [width, height] = this.getAutoSize()\n      // Calculate scale to fit screen\n      return Math.min(\n        width / Math.max(display.getWidth(), 1),\n        height / Math.max(display.getHeight(), 1)\n      )\n    },\n\n    updateDisplayScale() {\n      const display = this.client.getDisplay()\n      if (!display) {\n        return\n      }\n\n      const scale = this.getPropScale()\n      if (scale === this.scale) {\n        return\n      }\n      this.scale = scale\n      this.display.scale(scale)\n    },\n\n    debounceWindowResize() {\n      if (this.timeout) {\n        clearTimeout(this.timeout)\n      }\n      this.timeout = setTimeout(() => this.onWindowResize(), 300)\n    },\n\n    onWindowResize() {\n      // 监听 window display的变化\n      this.displayWidth = window.innerWidth - sideWidth\n      this.displayHeight = window.innerHeight\n      if (!this.autoFit) {\n        this.$log.debug('onWindowResize, autoFit is false')\n        return\n      }\n      const [optimalWidth, optimalHeight] = this.getGuaSize()\n      if (this.client !== null) {\n        const display = this.client.getDisplay()\n        const displayHeight = display.getHeight() * pixelDensity\n        const displayWidth = display.getWidth() * pixelDensity\n        this.updateDisplayScale()\n        if (displayHeight === optimalWidth && displayWidth === optimalHeight) {\n          return\n        }\n        this.client.sendSize(optimalWidth, optimalHeight)\n      }\n    },\n\n    displayResize(width, height) {\n      // 监听guacamole display的变化\n      this.$log.debug('Display resize: ', width, height)\n      const scale = this.getPropScale()\n      this.display.scale(scale)\n    },\n\n    onWindowFocus() {\n      this.$log.debug('On window focus ')\n      if (this.$refs.clipboard) {\n        this.$refs.clipboard.sendClipboardToRemote()\n      }\n    },\n\n    onsync: function(timestamp) {\n      // this.$log.debug('onsync==> ', timestamp)\n    },\n\n    handleKeys(keys) {\n      if (!this.client) {\n        return\n      }\n      for (let i = 0; i < keys.length; i++) {\n        this.client.sendKeyEvent(1, keys[i])\n      }\n      for (let i = 0; i < keys.length; i++) {\n        this.client.sendKeyEvent(0, keys[i])\n      }\n    },\n\n    setTunnelCallback(tunnel) {\n      const vm = this\n      tunnel.onerror = (status) => {\n        vm.$message.error(vm.$t('WebSocketError'))\n        vm.$log.error('Tunnel error: ', status)\n      }\n      tunnel.onuuid = (uuid) => {\n        vm.$log.debug('Tunnel assigned UUID: ', uuid)\n        vm.tunnel.uuid = uuid\n      }\n      tunnel.onstatechange = vm.onTunnelStateChanged\n      const oninstruction = tunnel.oninstruction\n      tunnel.oninstruction = (opcode, argv) => {\n        if (oninstruction) {\n          oninstruction(opcode, argv)\n        }\n        if (opcode === 'jms_event') {\n          vm.onJmsEvent(argv[0], argv[1])\n          vm.$log.debug('Tunnel instruction: ', opcode, argv)\n        }\n      }\n    },\n\n    onJmsEvent(event, data) {\n      const dataObj = JSON.parse(data)\n      switch (event) {\n        case 'session_pause': {\n          const msg = `${dataObj.user} ${this.$t('PauseSession')}`\n          this.$message.info(msg)\n          break\n        }\n        case 'session_resume': {\n          const msg = `${dataObj.user} ${this.$t('ResumeSession')}`\n          this.$message.info(msg)\n          break\n        }\n        default:\n          break\n      }\n      this.$log.debug('onJmsEvent: ', event, data)\n    },\n\n    onFileSystem(obj, name) {\n      this.hasFileSystem = true\n      if (this.$refs.fileSystem) { this.$refs.fileSystem.fileSystemReceived(obj, name) }\n    },\n\n    setClientCallback(client) {\n      const vm = this\n      // client.onrequired = this.onRequireParams\n      client.onstatechange = this.clientStateChanged\n      client.onerror = this.clientOnErr\n      // 文件挂载\n      client.onfilesystem = this.onFileSystem\n      client.onfile = (stream, mimetype, filename) => {\n        return vm.$refs.fileSystem.clientFileReceived(stream, mimetype, filename)\n      }\n      // 剪贴板\n      client.onclipboard = (stream, mimetype) => {\n        return vm.$refs.clipboard.receiveClientClipboard(stream, mimetype)\n      }\n      client.onsync = this.onsync\n    },\n    setDisplayCallback(display) {\n      display.onresize = this.displayResize\n      display.oncursor = this.onCursor\n\n      const displayEl = display.getElement()\n      this.$log.debug('Display el: ', displayEl)\n      displayEl.onclick = (e) => {\n        e.preventDefault()\n        return false\n      }\n      const mouse = new Guacamole.Mouse(displayEl)\n      // Ensure focus is regained via mousedown before forwarding event\n      mouse.onmousedown = this.onMouseDown\n      mouse.onmouseup = mouse.onmousemove = this.handleMouseState\n      // Hide software cursor when mouse leaves display\n      mouse.onmouseout = this.onMouseOut\n      this.mouse = mouse\n      // touch 触屏操作\n      const outDisplay = document.getElementById('display')\n      const touchScreen = new Guacamole.Mouse.Touchscreen(outDisplay)\n      touchScreen.onmousedown = this.handleEmulatedMouseDown\n      touchScreen.onmousemove = touchScreen.onmouseup = this.handleEmulatedMouseState\n      // 输入下沉\n      const sink = new Guacamole.InputSink()\n      sink.focus()\n      this.sink = sink\n\n      // Keyboard\n      const keyboard = new Guacamole.Keyboard(sink.getElement())\n      keyboard.onkeydown = (keysym) => {\n        this.sendEventToLuna('KEYBOARDEVENT', '')\n        this.client.sendKeyEvent(1, keysym)\n      }\n      keyboard.onkeyup = (keysym) => {\n        this.sendEventToLuna('KEYBOARDEVENT', '')\n        this.client.sendKeyEvent(0, keysym)\n      }\n      this.keyboard = keyboard\n    },\n    connectGuacamole(connectionParams, wsURL) {\n      const displayRef = document.getElementById('display')\n      const tunnel = new Guacamole.WebSocketTunnel(wsURL)\n      // 连接资产耗时，造成的 ws 超时断开问题 默认 15s 改成 60s\n      tunnel.receiveTimeout = 60 * 1000\n      const client = new Guacamole.Client(tunnel)\n      this.client = client\n      this.tunnel = tunnel\n      this.display = client.getDisplay()\n\n      this.setTunnelCallback(this.tunnel)\n      this.setClientCallback(this.client)\n      this.setDisplayCallback(this.display)\n      // client.getDisplay()\n      displayRef.appendChild(this.display.getElement())\n      displayRef.appendChild(this.sink.getElement())\n      this.$log.debug('Display : ', displayRef)\n      // 开始连接\n      client.connect(connectionParams)\n      window.onunload = function() {\n        client.disconnect()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-container {\n  margin: 0 auto;\n}\n\n.el-main {\n  padding: 0;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n}\n.el-row {\n  height: 100%;\n}\n\n.el-aside {\n  height: 100%;\n  overflow: hidden;\n}\n\n.el-dropdown-link {\n  color: #409eff;\n}\n\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n.el-menu {\n  height: 100%;\n  min-width: 100%;\n  border-right: 0 none;\n}\n\n.el-menu-item {\n  color: rgba(0, 0, 0, 0.65);\n  font-size: 14px;\n  list-style-type: none;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 0;\n}\n\n.el-menu-item:hover,.el-menu-item:focus{\n  color: white;\n  background: rgba(0, 0, 0, .3);\n}\n\n#displayOuter {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  display: table;\n}\n\n#displayMiddle {\n  width: 100%;\n  height: 100%;\n  display: table-cell;\n  vertical-align: middle;\n  text-align: center;\n}\n\n#display{\n  display: inline-block;\n}\n\n#display * {\n  position: relative;\n}\n\n#display > * {\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.sidebar-popper .el-menu--popup{\n  background-color: white;\n  color: #1f1b1b;\n  padding: 0;\n}\n\n.h3title{\n  padding-left: 25px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacamoleConnect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacamoleConnect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GuacamoleConnect.vue?vue&type=template&id=8c71e308&scoped=true&\"\nimport script from \"./GuacamoleConnect.vue?vue&type=script&lang=js&\"\nexport * from \"./GuacamoleConnect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GuacamoleConnect.vue?vue&type=style&index=0&id=8c71e308&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c71e308\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacClipboard.vue?vue&type=style&index=0&id=2b702b8b&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacFileSystem.vue?vue&type=style&index=0&id=0fbe81ba&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightPanel.vue?vue&type=style&index=0&id=68aec19e&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GuacFile.vue?vue&type=style&index=0&id=648d08b1&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=ff57fe8a&prod&scoped=true&lang=css&\""],"sourceRoot":""}